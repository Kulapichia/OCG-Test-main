/* Base UI rules */

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	min-height: 100vh;
	padding: 10px;
	line-height: 1.5;
}

.container {
	max-width: 1200px;
	margin: 0 auto;
	background: white;
	border-radius: 20px;
	box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
}

/* 移除旧的白底 header 定义，遵循下方渐变定义 */

.input-section { background: #f8f9fa; border-radius: 15px; padding: 20px; margin-bottom: 20px; border: 2px solid #e9ecef; transition: all 0.3s ease; }
.input-section:hover { border-color: #667eea; background: #f0f4ff; box-shadow: 0 4px 20px rgba(102, 126, 234, 0.1); }

.form-control { width: 100%; padding: 12px; border: 2px solid #dee2e6; border-radius: 8px; font-size: clamp(14px, 2.5vw, 16px); transition: all 0.3s ease; background: white; }
.form-control:focus { outline: none; border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
.form-control:hover { border-color: #667eea; background: #fafbff; }

/* Input group labels */
.input-group { margin-bottom: 16px; }
.input-group label {
	display: block;
	margin-bottom: 6px;
	font-weight: 600;
	color: #495057;
	font-size: clamp(0.9rem, 2vw, 1rem);
}

/* Form help text (small description under inputs) */
.form-help {
	color: #6c757d;
	font-size: clamp(10px, 1.8vw, 12px);
	margin-top: 4px;
	display: block;
	line-height: 1.3;
}

/* Model input group (align custom button at bottom, allow wrap) */
.model-input-group { display: flex; gap: 8px; align-items: flex-end; flex-wrap: wrap; }
.model-input-group .form-control { flex: 1; min-width: 0; }

.results-tabs { display: flex; margin-bottom: 16px; border-bottom: 2px solid #e9ecef; overflow-x: auto; -webkit-overflow-scrolling: touch; }
.tab { padding: 10px 16px; border: none; background: none; cursor: pointer; font-size: clamp(12px, 2.2vw, 16px); font-weight: 600; color: #6c757d; border-bottom: 3px solid transparent; transition: all 0.3s ease; white-space: nowrap; flex-shrink: 0; }
.tab.active { color: #667eea; border-bottom-color: #667eea; }

/* Tab content visibility */
.tab-content { display: none; }
.tab-content.active { display: block; }

.stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-bottom: 20px; }
.stat-card { background: #f8f9fa; padding: 16px 12px; border-radius: 12px; text-align: center; border: 2px solid #e9ecef; transition: all 0.3s ease; }
.stat-card:hover { border-color: #667eea; background: #f0f4ff; transform: translateY(-2px); box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15); }

.key-list { background: #f8f9fa; border: 2px solid #e9ecef; border-radius: 12px; padding: 16px; max-height: 350px; overflow-y: auto; transition: all 0.3s ease; -webkit-overflow-scrolling: touch; min-height: 120px; display: flex; flex-direction: column; }
.key-list:hover { border-color: #667eea; background: #f0f4ff; box-shadow: 0 2px 12px rgba(102, 126, 234, 0.1); }
.empty-state { text-align: center; color: #6c757d; padding: 12px 0; }

.key-item { display: flex; align-items: center; justify-content: space-between; border: 1px solid #e6e8f0; border-radius: 8px; padding: 12px; margin-bottom: 8px; transition: all .2s ease; }
.key-item:hover { transform: translateX(2px); box-shadow: 0 2px 8px rgba(76, 99, 210, 0.08); }
.key-text { font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace; font-size: clamp(11px, 2vw, 14px); color: #495057; margin-right: 8px; }
.key-status { font-size: clamp(10px, 1.8vw, 12px); padding: 4px 8px; border-radius: 6px; font-weight: 600; text-transform: uppercase; }
.status-valid { background: #e6ffed; color: #1e7e34; }
.status-invalid { background: #fdecea; color: #dc3545; }
.status-rate-limited { background: #fff3cd; color: #856404; }
.status-paid { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
.status-testing { background: #e2e3e5; color: #6c757d; }
.status-retrying { background: #fff3cd; color: #d39e00; }

.progress-bar { height: 8px; background: #e6e8f0; border-radius: 999px; overflow: hidden; margin: 12px 0; }
.progress-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #4c63d2, #764ba2); transition: width .2s ease; }

.loading { display: flex; align-items: center; gap: 8px; }
.loading .spinner { width: 18px; height: 18px; border: 3px solid rgba(0,0,0,.1); border-top-color: #4c63d2; border-radius: 50%; animation: spin .8s linear infinite; }
@keyframes spin { to { transform: rotate(360deg); } }

.button-group { display: flex; gap: 10px; margin-top: 20px; flex-wrap: wrap; }
.btn { flex: 1; min-width: 120px; padding: 12px 16px; border: none; border-radius: 8px; font-size: clamp(14px, 2.5vw, 16px); font-weight: 600; cursor: pointer; transition: all 0.3s ease; text-align: center; }
.btn-primary { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4); }
.btn-secondary { background: #6c757d; color: white; }
.btn-secondary:hover { background: #5a6268; }
.btn-detect { background: #28a745; color: white; }
.btn-detect:hover { background: #218838; }
.btn-danger { background: #dc3545; color: white; border-color: #dc3545; }

.textarea-wrapper { position: relative; }
.paste-btn { position: absolute; right: 8px; top: 8px; font-size: 12px; padding: 6px 8px; }
.paste-btn { position: absolute; top: 8px; right: 8px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 4px 8px; cursor: pointer; font-size: 14px; transition: all .2s ease; z-index: 10; }
.paste-btn:hover { background: #e9ecef; border-color: #adb5bd; }
.paste-btn:active { transform: scale(0.95); }
.label-with-import { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.import-btn { background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; padding: 4px 8px; cursor: pointer; font-size: 14px; transition: all .2s ease; }
.import-btn:hover { background: #e9ecef; border-color: #adb5bd; }
.import-btn:active { transform: scale(0.95); }

.preset-buttons, .retry-preset-buttons { display: flex; gap: 6px; justify-content: center; flex-wrap: wrap; }
.preset-btn, .retry-preset-btn { flex: 0 0 auto; }

@media (max-width: 768px) {
	.preset-btn, .retry-preset-btn { 
		flex: 1; 
		min-width: 0;
		max-width: none;
		font-size: 12px;
		padding: 8px 4px;
		white-space: nowrap;
	}
	.model-toggle-btn { width: 100%; margin-top: 8px; }
	.concurrency-container, .retry-container { flex-direction: column; gap: 12px; padding: 12px; align-items: stretch; }
	.concurrency-input-section, .retry-input-section { align-self: center; min-width: auto; }
	.concurrency-input-section .form-control, .retry-input-section .form-control { width: 100px; margin: 0 auto; }
	.slider-section, .retry-slider-section { width: 100%; }
	.preset-buttons, .retry-preset-buttons { 
		gap: 4px; 
		margin-top: 8px; 
		display: flex;
		flex-wrap: nowrap;
		justify-content: space-between;
	}
	.button-group { flex-direction: column; gap: 12px; }
	.btn { min-width: auto; width: 100%; }
	.stats { grid-template-columns: repeat(2, 1fr); gap: 8px; }
	.stat-card { padding: 12px 8px; }
	.results-tabs { gap: 4px; }
	.tab { padding: 8px 12px; font-size: 12px; }
	.key-list { padding: 12px; max-height: 300px; }
	.key-item { padding: 10px; flex-direction: column; align-items: flex-start; gap: 6px; }
	.key-text { margin-right: 0; width: 100%; }
	.key-status { align-self: flex-end; }
	.theme-controls { top: 8px; right: 8px; gap: 6px; }
	.control-btn { width: 32px; height: 32px; font-size: 14px; }
	.alert { padding: 10px; font-size: 12px; }
}

/* 针对更小屏幕的额外优化 */
@media (max-width: 480px) {
	.concurrency-container, .retry-container {
		padding: 8px;
	}
	.preset-buttons, .retry-preset-buttons {
		gap: 4px;
		justify-content: space-between;
		flex-wrap: wrap;
		margin: 8px 0;
		width: 100%;
		box-sizing: border-box;
	}
	.preset-btn, .retry-preset-btn {
		flex: 0 1 calc(50% - 2px);
		max-width: calc(50% - 2px);
		min-width: 0;
		padding: 6px 2px;
		font-size: 10px;
		box-sizing: border-box;
		overflow: hidden;
		text-overflow: ellipsis;
	}
}

/* 针对极小屏幕 */
@media (max-width: 320px) {
	.preset-buttons, .retry-preset-buttons {
		gap: 2px;
		margin: 6px 0;
	}
	.preset-btn, .retry-preset-btn {
		flex: 0 1 calc(50% - 1px);
		max-width: calc(50% - 1px);
		padding: 5px 1px;
		font-size: 9px;
		min-height: 28px;
		display: flex;
		align-items: center;
		justify-content: center;
	}
}

/* Theme controls (light/base) */
.theme-controls { position: fixed; top: 10px; right: 10px; display: flex; gap: 8px; z-index: 1000; }
.control-btn {
	width: 36px; height: 36px; border: none; border-radius: 50%;
	background: rgba(255, 255, 255, 0.2); backdrop-filter: blur(10px);
	cursor: pointer; transition: all .3s ease; display: flex; align-items: center; justify-content: center; font-size: 16px;
}
.control-btn:hover { background: rgba(255,255,255,.3); transform: scale(1.1); }

/* Header and main content */
.main-content { padding: 20px; }
.header { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; text-align: center; }
.header h1 { font-size: clamp(1.5rem, 4vw, 2.5rem); margin-bottom: 8px; font-weight: 700; word-break: break-word; }
.header p { font-size: clamp(.9rem, 2.5vw, 1.1rem); opacity: .9; line-height: 1.4; }

/* Ensure rounded container clips inner content */
.container { overflow: hidden; }

/* Detected models block (light/base) */
.detected-models { background: #e3f2fd; border: 1px solid #bbdefb; border-radius: 8px; margin-top: 10px; display: none; transition: all .3s ease; }
.detected-models:hover { border-color: #2196f3; background: #e1f5fe; box-shadow: 0 2px 12px rgba(33,150,243,.15); }
.detected-models-header { padding: 12px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #bbdefb; transition: background .3s ease; }
.detected-models-header:hover { background: rgba(33,150,243,.1); }
.detected-models-header h4 { margin: 0; color: #1976d2; font-size: clamp(12px, 2vw, 14px); }
.collapse-icon { color: #1976d2; font-size: 14px; transition: transform .3s ease; }
.collapse-icon.collapsed { transform: rotate(-90deg); }
.model-list-container { padding: 12px; max-height: 200px; overflow-y: auto; display: none; }
.model-list-container.expanded { display: block; }
.model-list { display: flex; flex-wrap: wrap; gap: 6px; }
.model-tag { background: #2196f3; color: white; padding: 4px 8px; border-radius: 4px; font-size: clamp(10px, 1.8vw, 12px); cursor: pointer; transition: background .3s ease; word-break: break-all; }
.model-tag:hover { background: #1976d2; }

/* Copy button and common helpers */
.copy-btn { padding: 10px 16px; background: #007bff; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: clamp(12px, 2vw, 14px); margin-top: 12px; width: 100%; transition: background .3s ease; }
.copy-btn:hover { background: #0056b3; }
.hidden { display: none; }
.gemini-only { transition: all 0.3s ease; }
.gemini-only.hidden { display: none !important; }

/* Textarea variant */
.form-control.textarea { resize: vertical; min-height: 100px; font-family: 'Courier New', monospace; font-size: clamp(12px, 2vw, 14px); }

/* Firefox slider thumbs (light/base) */
.slider::-moz-range-thumb {
	width: 18px;
	height: 18px;
	border-radius: 50%;
	background: #667eea;
	cursor: pointer;
	border: none;
	box-shadow: 0 2px 6px rgba(102,126,234,.3);
}
.retry-slider::-moz-range-thumb {
	width: 18px;
	height: 18px;
	border-radius: 50%;
	background: #f39c12;
	cursor: pointer;
	border: none;
	box-shadow: 0 2px 6px rgba(243,156,18,.3);
}


/* Toggle custom model button */
.model-toggle-btn {
	padding: 12px 12px;
	background: #6c757d;
	color: white;
	border: none;
	border-radius: 8px;
	cursor: pointer;
	font-size: clamp(12px, 2vw, 14px);
	white-space: nowrap;
	transition: background 0.3s ease;
	flex-shrink: 0;
}
.model-toggle-btn:hover { background: #5a6268; }
.model-toggle-btn.active { background: #667eea; }


/* Concurrency card (light/base) */
.concurrency-container {
	display: flex;
	flex-direction: row;
	gap: 16px;
	align-items: center;
	margin-top: 12px;
	padding: 16px;
	background: #f1f3f5;
	border: 2px solid #e9ecef;
	border-radius: 12px;
	transition: all 0.3s ease;
}
.concurrency-container:hover { border-color: #667eea; background: #f8f9ff; }
.concurrency-input-section { flex-shrink: 0; min-width: 80px; }
.concurrency-input-section .form-control {
	width: 80px;
	text-align: center;
	font-weight: 600;
	color: #667eea;
	background: white;
	border: 2px solid #dee2e6;
}
.concurrency-input-section .form-control:focus { border-color: #667eea; box-shadow: 0 0 0 3px rgba(102,126,234,.1); }
.slider-section { flex: 1; display: flex; flex-direction: column; gap: 12px; }
.slider-container { display: flex; align-items: center; gap: 12px; }
.slider {
	flex: 1;
	-webkit-appearance: none;
	height: 6px;
	border-radius: 3px;
	background: #dee2e6;
	outline: none;
	transition: background 0.3s ease;
}
.slider::-webkit-slider-thumb {
	-webkit-appearance: none;
	appearance: none;
	width: 18px;
	height: 18px;
	border-radius: 50%;
	background: #667eea;
	cursor: pointer;
	transition: background 0.3s ease;
	box-shadow: 0 2px 6px rgba(102,126,234,.3);
}
.slider::-webkit-slider-thumb:hover { background: #5a67d8; box-shadow: 0 4px 12px rgba(102,126,234,.4); }
.slider-value {
	min-width: 30px;
	text-align: center;
	font-weight: 700;
	color: #667eea;
	font-size: clamp(14px, 2.5vw, 18px);
	background: white;
	padding: 4px 8px;
	border-radius: 6px;
	border: 1px solid #dee2e6;
	flex-shrink: 0;
}

/* Retry card (light/base) */
.retry-container {
	display: flex;
	flex-direction: row;
	gap: 16px;
	align-items: center;
	margin-top: 12px;
	padding: 16px;
	background: #fff3cd;
	border: 2px solid #ffeaa7;
	border-radius: 12px;
	transition: all 0.3s ease;
}
.retry-container:hover { border-color: #f39c12; background: #fef9e7; }
.retry-input-section { flex-shrink: 0; min-width: 80px; }
.retry-input-section .form-control {
	width: 80px;
	text-align: center;
	font-weight: 600;
	color: #f39c12;
	background: white;
	border: 2px solid #ffeaa7;
}
.retry-input-section .form-control:focus { border-color: #f39c12; box-shadow: 0 0 0 3px rgba(243,156,18,.1); }
.retry-slider-section { flex: 1; display: flex; flex-direction: column; gap: 12px; }
.retry-slider-container { display: flex; align-items: center; gap: 12px; }
.retry-slider {
	flex: 1;
	-webkit-appearance: none;
	height: 6px;
	border-radius: 3px;
	background: #ffeaa7;
	outline: none;
	transition: background 0.3s ease;
}
.retry-slider::-webkit-slider-thumb {
	-webkit-appearance: none;
	appearance: none;
	width: 18px;
	height: 18px;
	border-radius: 50%;
	background: #f39c12;
	cursor: pointer;
	transition: background 0.3s ease;
	box-shadow: 0 2px 6px rgba(243,156,18,.3);
}
.retry-slider::-webkit-slider-thumb:hover { background: #e67e22; box-shadow: 0 4px 12px rgba(243,156,18,.4); }
.retry-slider-value {
	min-width: 30px;
	text-align: center;
	font-weight: 700;
	color: #f39c12;
	font-size: clamp(14px, 2.5vw, 18px);
	background: white;
	padding: 4px 8px;
	border-radius: 6px;
	border: 1px solid #ffeaa7;
	flex-shrink: 0;
}

/* Preset buttons (light/base) - base styles defined above */
.preset-btn {
	padding: 8px 12px;
	border: 1px solid #667eea;
	background: white;
	color: #667eea;
	border-radius: 8px;
	cursor: pointer;
	font-size: clamp(11px, 2vw, 13px);
	font-weight: 500;
	transition: all 0.3s ease;
	min-width: 50px;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	flex: 0 0 auto;
}
.preset-btn:hover { background: #667eea; color: white; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(102,126,234,.3); }
.preset-btn.active { background: #667eea; color: white; box-shadow: 0 4px 12px rgba(102,126,234,.4); }
.retry-preset-btn {
	padding: 8px 12px;
	border: 1px solid #f39c12;
	background: white;
	color: #f39c12;
	border-radius: 8px;
	cursor: pointer;
	font-size: clamp(11px, 2vw, 13px);
	font-weight: 500;
	transition: all 0.3s ease;
	min-width: 50px;
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
	flex: 0 0 auto;
}
.retry-preset-btn:hover { background: #f39c12; color: white; transform: translateY(-1px); box-shadow: 0 4px 12px rgba(243,156,18,.3); }
.retry-preset-btn.active { background: #f39c12; color: white; box-shadow: 0 4px 12px rgba(243,156,18,.4); }

/* Detect button */
.btn-detect { background: #28a745; color: white; }
.btn-detect:hover { background: #218838; }

/* Alert block and counters */
.alert { background: #d1ecf1; border: 1px solid #bee5eb; padding: 12px; border-radius: 8px; margin-top: 12px; color: #0c5460; transition: all 0.3s ease; font-size: clamp(12px, 2vw, 14px); line-height: 1.4; }
.alert:hover { border-color: #17a2b8; background: #c3e6ea; box-shadow: 0 2px 12px rgba(23,162,184,.15); }
.valid { color: #28a745; }
.invalid { color: #dc3545; }
.rate-limited { color: #ffc107; }
.paid { color: #28a745; }
.testing { color: #6f42c1; }
.retrying { color: #fd7e14; }
.total { color: #6f42c1; }
